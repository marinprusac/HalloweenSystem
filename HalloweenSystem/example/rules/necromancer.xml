<?xml version="1.0" encoding="utf-8"?>
<rule name="Choose necromancer">
    
    <actions>
        <assign>
            <players>
                <random amount="1">
                    <complement>
                        <iterate name="tag" parameter_type="tag">
                            <parameter_selector>
                                <group_tag name="Alliance members"/>
                            </parameter_selector>
                            <iterable_selector>
                                <has_tag>
                                    <tags>
                                        <parameter name="tag"/>
                                    </tags>
                                </has_tag>
                            </iterable_selector>
                        </iterate>
                        <has_type tag="Queen"/>
                        <has_group name="Magic wielders"/>
                        <has_group name="Clergy"/>
                    </complement>
                </random>
            </players>
            <tags>
                <tag name="Necromancer"/>
                <tag name="Visited">
                    <tags>
                        <tag name="Graveyard"/>
                    </tags>
                </tag>
            </tags>
        </assign>
    </actions>
    
</rule>